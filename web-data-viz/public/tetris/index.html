<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VaporTris</title>

    <!-- importei biblioteca p5 js, voltada para design e arte-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.4/p5.min.js"></script>
</head>
<body>
    <script src="Tabuleiro.js"></script>
    <script>

        /* 
        this -

        Canvas - Renderizador de gráficos especializado para gerar vetores,
        imagens, videos, neste canvas definido em setup, será desenhado o nosso
        tetris!

        Propriedades Matemáticas do canvas:
        Eixos - (x, y) iniciados em 0 onde o X = 900 e Y = 600,
        que geram um retangulo ou o nosso Canvas, que trabalharei
        com pixeis nele.

        Matriz: com base nos eixos (x, y) irá gerar campos como por exemplo
        esta matriz (X = [3], Y = [3]):
        (0,0) - (1,0) - (2,0) - (3,0) 
        (0,1) - (1,1) - (2,1) - (3,1) 
        (0,2) - (1,2) - (2,2) - (3,2) 
        (0,3) - (1,3) - (2,3) - (3,3) 

        */

        // cria a matriz onde o tetris irá funcionar, função nativa da biblioteca p5 js,
        // ajusta propriedades iniciais dos objetos e variaveis.
        const borda_tabuleiro = 10;

        function setup(){
            createCanvas(900,600);
            tabuleiro = new Tabuleiro();
            tetrimino = new Tetrimino();
            resizeCanvas(
                tabuleiro.largura + 2 * borda_tabuleiro, 
                tabuleiro.altura + 2 * borda_tabuleiro
            );
        }

        // Defino o visual da matriz do tetris, função nativa da biblioteca p5 js,
        // serve para intruções precisas ao desenhar o canvas.
        function draw(){
            background("gray");
            tabuleiro.desenhar();
            tetrimino.desenhar();
        }

        class Tetrimino {
            constructor(){
                this.posicao = createVector(0, 0);
            }
            /*
                Esta função é responsavel pelo processamento logico de desenhar este objeto
            */
            desenhar(){
                push();
                fill("red");
                let coord = tabuleiro.coordenada(this.posicao.x, this.posicao.y);
                rect(coord.x, coord.y, tabuleiro.lado_celula);
                pop();
            }
        }
    </script>    
</body>
</html>